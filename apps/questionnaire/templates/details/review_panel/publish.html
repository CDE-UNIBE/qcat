{% load i18n %}

<div class="row">
  <div class="medium-12 columns">
    <h3>{% trans 'Pending for publishing' %}</h3>
    <p>{% trans "This questionnaire is currently waiting to be published. Once it is published, it will be publicly visible." %}</p>
  </div>
</div>

{% if 'publish_questionnaire' in review_config.permissions %}
  {% if review_config.mode == 'view' and 'edit_questionnaire' in review_config.permissions %}
    <div class="row workflow-action">
      <div class="medium-2 columns">
        <p>
          <a class="button" type="submit" href="{{ review_config.url }}">{% trans "Edit" %}</a>
        </p>
      </div>
      <div class="medium-10 columns">
        <p>{% trans 'Edit the questionnaire. If big changes need to be made, you can also "reject" the questionnaire so editors can revise it.' %}</p>
      </div>
    </div>
  {% elif review_config.mode == 'edit' %}
    <div class="row workflow-action">
      <div class="medium-2 columns">
        <p>
          <a class="button is-ok" href="{{ review_config.url }}">{% trans "View" %}</a>
        </p>
      </div>
      <div class="medium-10 columns">
        <p>{% trans 'View this questionnaire.' %}</p>
      </div>
    </div>
  {% endif %}

  <div class="row workflow-action">
    <div class="medium-2 columns">
      <p>
        <a id="button-publish" name="publish" class="button small is-ok" data-reveal-id="confirm-publish">{% trans "Publish" %}</a>
      </p>
    </div>
    <div class="medium-10 columns">
      <p>{% trans 'The questionnaire will be published. Next status will be 'public' and it will be publicly visible.' %}</p>
    </div>
    <!-- The modal for publication -->
    <div id="confirm-publish" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
      <h2>{% trans "Please confirm publication." %}</h2>
      <p>{% trans "By submitting this, this questionnaire is made available for all users on the website and the API." %}</p>
      <button name='publish' value='true' class="button" type="submit" form="review_form">{% trans "Publish" %}</button>
      <a class="close-reveal-modal" aria-label="Close">&#215;</a>
    </div>
    <!-- endmodal -->
  </div>

  <div class="row workflow-action">
    <div class="medium-2 columns">
      <p>
        <a id="button-reject" name="reject" class="button is-dangerous" data-reveal-id="confirm-reject">{% trans "Reject" %}</a>
      </p>
    </div>
    <div class="medium-10 columns">
      <p>{% trans 'The questionnaire is not acceptable and it needs to be edited again. Next status will be 'draft' and editors will be notified.' %}</p>
    </div>
    <!-- The modal for rejection -->
    <div id="confirm-reject" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
      <h2>{% trans "Please confirm rejection." %}</h2>
      <p>{% trans "By submitting this, this questionnaire will be sent back to the compiler." %}</p>
      <button name='reject' value='true' class="button" type="submit" form="review_form">{% trans "Reject" %}</button>
      <a class="close-reveal-modal" aria-label="Close">&#215;</a>
    </div>
    <!-- endmodal -->
  </div>
{% endif %}

{% if 'assign_questionnaire' in review_config.permissions %}
  {% trans "Assign publisher" as assign_header %}
  {% trans 'Publishers can be assigned to this questionnaire. They will have the permissions to publish (approve or reject) the questionnaire. A questionnaire can have more than one publisher, but only one decision is needed for the publishing.' as assign_description %}
  {% trans "Assigned publishers:" as assign_assigned %}
  {% trans "There are no publishers assigned to this questionnaire." as assign_empty %}
  {% trans "Edit assigned publishers. Click the button to update the assigned publishers." as assign_edit %}
  {% include 'details/review_panel/_assign_user.html' with users=review_config.publishers %}
{% endif %}
