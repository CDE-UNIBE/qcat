{% load i18n %}

  <section id="{{ keyword }}" class="row tech-section" data-magellan-destination="{{ keyword }}">
    <a name="{{ keyword }}"></a>

    <header class="tech-output-header medium-7 columns">
      {% if metadata.status.0 and metadata.status.0 != 'public' %}
        <div class="tech-status">
          <span class="label is-{{ metadata.status.0 }}">{{ metadata.status.1 }}</span>
        </div>
      {% endif %}
      <p class="tech-output-header-info clearfix"><span class="is-muted left">{{ metadata.code }}</span></p>
    </header>
    <aside class="tech-output-aside medium-4 medium-offset-1 columns" role="contentinfo">
      <ul class="tech-output-infos">
        <li>
          <span class="is-muted">{% trans "Creation:" %}</span>
          <time datetime="{{ metadata.created|date:"c" }}">{{ metadata.created|date:"SHORT_DATETIME_FORMAT"|default:"&ndash;" }}</time>
        </li>
        <li>
          <span class="is-muted">{% trans "Update:" %}</span>
          <time datetime="{{ metadata.updated|date:"c" }}">{{ metadata.updated|date:"SHORT_DATETIME_FORMAT"|default:"&ndash;" }}</time>
        </li>
        <li>
          <span class="is-muted">{% if metadata.compilers|length > 1 %}{% trans "Compilers:" %}{% else %}{% trans "Compiler:" %}{% endif %}</span>
          {% for compiler in metadata.compilers %}
            <a rel="author" href="#" class="link">{{ compiler.name }}</a>{% if not forloop.last %}, {% endif %}
          {% empty %}
            &ndash;
          {% endfor %}
        </li>
        <li>
          <span class="is-muted">{% if metadata.editors|length > 1 %}{% trans "Editors:" %}{% else %}{% trans "Editor:" %}{% endif %}</span>
          {% for editor in metadata.editors %}
            <a rel="author" href="#" class="link">{{ editor.name }}</a>{% if not forloop.last %}, {% endif %}
          {% empty %}
            &ndash;
          {% endfor %}
        </li>
      </ul>
    </aside>

    {% if 'edit_questionnaire' in permissions and view_mode == 'edit' %}
      <div class="medium-9 columns is-rhythmed">
        <h2>{{ label }}</h2>
        <div class="tech-section-progress progress">
          <span class="progress-steps"></span>
          <span class="meter" style="width:{{ progress }}%"></span>
        </div>
      </div>
      <div class="medium-3 columns is-rhythmed">
        <a class="button is-{{ configuration_name }} right" href="{% url edit_step_route questionnaire_identifier keyword %}">
          {% trans "Edit this section" %} <strong>({{ complete }}/{{ total }}){% if has_changes %}<span class="button-has-changes">*</span>{% endif %}</strong>
        </a>
      </div>
    {% else %}
      <div class="medium-12 columns">
        <h2>{{ label }}</h2>
      </div>
    {% endif %}
    <div class="small-12 columns output is-rhythmed-2">
      {% for subcategory, subcategory_config in subcategories %}
        {{ subcategory }}
      {% endfor %}
    </div>
  </section>
