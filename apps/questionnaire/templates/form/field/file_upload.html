{% comment %}

  Template to render an upload field. The upload is handled by DropzoneJS.

{% endcomment %}

{% load i18n %}
{% load sekizai_tags %}
{% load staticfiles %}
{% load compress %}

{% addtoblock 'js_head' %}
  {% compress js %}
    <script src="{% static 'js/dropzone.min.js' %}"></script>
    <script type="text/javascript">
      Dropzone.autoDiscover = false;
    </script>
  {% endcompress %}
{% endaddtoblock %}

<div id="{{ attrs.id }}" class="dropzone {{ attrs.css_class }}" data-upload-url="{% url 'file_upload' %}" data-upload-preview-container="preview-{{ attrs.id }}">
  <div class="fallback">
    Sorry, the upload functionality seems to be broken for the time being. Please come back later.
  </div>
</div>

<div id="preview-{{ attrs.id }}" class="tech-figure-container" style="display:none;">
  <div class="image-preview" style="max-height: 300px; background-color: grey; text-align: center;"></div>
  <div style="position: absolute; bottom: 0; padding: 20px;">
    <button class="remove-image" data-dropzone-id="{{ attrs.id }}" style="margin-bottom: 0;">{% trans "Remove" %}</button>
  </div>
</div>
