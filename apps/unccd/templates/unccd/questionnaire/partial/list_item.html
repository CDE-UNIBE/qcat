{% load i18n %}
{% load staticfiles %}

<article role="article" class="tech-item is-unccd">
  <figure class="tech-thumbnail">
    <a href="{% url 'unccd:questionnaire_details' item.code %}" title="">
      {% if item.image %}
        <img src="{{ item.image }}" alt="{{ item.name }}" />
      {% else %}
        <img src="{% static "assets/img/picture.svg" %}" alt="{{ item.name }}">
      {% endif %}
    </a>
    {% if item.configurations_property.0 %}
      <figcaption class="tech-type is-{{ item.configurations_property.0 }}">
        <span>{{ item.configurations_property.0 }}</span>
      </figcaption>
    {% elif item.configurations.0 %}
      <figcaption class="tech-type is-{{ item.configurations.0 }}">
        <span class="is-{{ item.configurations.0 }}">{{ item.configurations.0 }}</span>
      </figcaption>
    {% endif %}
  </figure>

  <div class="tech-item-content">
    {% for flag in item.flags_property %}
      <span class="tech-status label is-{{ flag.flag }}">{{ flag.name }}</span>
    {% endfor %}
    {% for flag in item.flags %}
      <span class="tech-status label is-{{ flag.flag }}">{{ flag.name }}</span>
    {% endfor %}
    {% if item.status.0 and item.status.0 != 'public' %}
      <span class="tech-status label is-{{ item.status.0 }}">{{ item.status.1 }}</span>
    {% endif %}
    <header>
      <h2 class="tech-item-title">
        <a href="{% url 'unccd:questionnaire_details' item.code %}">
          {% if not item.native_configuration %}<small>[{{ item.configurations|join:"|" }}]</small> {% endif %}{{ item.name|default:""|truncatewords:8 }} <span class="is-light">{% if item.country %}[{{ item.country }}]{% endif %}</span>
        </a>
      </h2>
    </header>
    <main class="tech-item-description">
      {% trans "No description available." as no_description %}
      <p>{{ item.unccd_description|truncatewords:50|default:no_description }}</p>
      <ul class="tech-infos is-light is-muted">
        <li>{% if item.compilers|length > 1 %}{% trans "Compilers:" %}{% else %}{% trans "Compiler:" %}{% endif %} {% for compiler in item.compilers %}{{ compiler.name }}{% if not forloop.last %}, {% endif %}{% empty %}&ndash;{% endfor %}</li>
        <li><time datetime="{{ item.created|date:"c" }}" pubdate="pubdate">{{ item.created|date:"SHORT_DATETIME_FORMAT"|default:"&ndash;" }}</time></li>
      </ul>
    </main>
  </div>
</article>
